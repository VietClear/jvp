<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>John’s Vietnamese Phrases</title>
    <link href="https://fonts.googleapis.com/css2?family=Handlee&display=swap" rel="stylesheet">
    <style>
        :root {
            --fg: #111;
            --bg: #fff;
            --muted: #666;
            --accent: #0f766e;
            --card: #f7f7f7;
            --border: #e5e5e5;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            margin: 0;
            padding: 0
        }

        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            color: var(--fg);
            background: var(--bg);
            line-height: 1.45
        }

        .app-header {
            position: sticky;
            top: 0;
            z-index: 20;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
            padding: 8px 12px
        }

        .app-title {
            font-family: 'Handlee', cursive;
            font-size: 22px;
            margin: 0;
            text-align: center
        }

        .top-nav {
            display: flex;
            justify-content: center;
            gap: 16px;
            padding-top: 4px
        }

        .tone-link {
            font-size: 14px;
            color: var(--accent);
            text-decoration: none
        }

        .tone-link:hover {
            text-decoration: underline
        }

        main#app {
            max-width: 960px;
            margin: 0 auto;
            padding: 12px
        }

        .view {
            display: none
        }

        .view.active {
            display: block
        }

        .view-header {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding: 8px 0 12px;
            position: sticky;
            top: 56px;
            background: var(--bg);
            z-index: 15;
            border-bottom: 1px solid var(--border)
        }

        .btn {
            border: 1px solid var(--border);
            background: var(--card);
            padding: 8px 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px
        }

        .btn:hover {
            filter: brightness(.97)
        }

        .btn.primary {
            background: var(--accent);
            color: #fff;
            border-color: var(--accent)
        }

        .btn.back {
            min-width: 120px;
            font-weight: 600
        }

        .btn.ghost {
            background: transparent
        }

        .category-list {
            list-style: none;
            padding: 0;
            margin: 10px 0 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
            gap: 12px
        }

        .category-list li {
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 14px;
            padding: 16px;
            cursor: pointer
        }

        .category-list li:hover {
            filter: brightness(.98)
        }

        .category-name {
            display: block;
            font-weight: 700;
            margin-bottom: 4px
        }

        .category-count {
            color: var(--muted);
            font-size: 13px
        }

        .category-title {
            text-align: center;
            margin: 14px 0;
            font-size: 18px
        }

        .phrases-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px
        }

        .phrase-card {
            border: 1px solid var(--border);
            background: var(--bg);
            border-radius: 14px;
            padding: 12px
        }

        .phrase-top {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap
        }

        .audio-btn {
            display: inline-block;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 14px;
            cursor: pointer
        }

        .audio-btn.primary {
            background: var(--accent);
            color: #fff;
            border-color: var(--accent)
        }

        .syllable-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 8px;
            margin-top: 8px
        }

        .syllable {
            border: 1px dashed var(--border);
            border-radius: 10px;
            padding: 8px;
            display: grid;
            grid-template-rows: auto auto auto;
            gap: 4px
        }

        .syllable .syllable-text {
            font-size: 18px;
            font-weight: 700
        }

        .syllable .tone-name {
            font-size: 12px;
            color: var(--muted)
        }

        .translation {
            margin-top: 8px;
            color: var(--muted);
            font-size: 14px
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px
        }

        .note {
            color: var(--muted);
            font-size: 13px
        }

        .app-footer {
            border-top: 1px solid var(--border);
            padding: 10px 12px 24px;
            margin-top: 18px;
            text-align: center;
            color: var(--muted);
            font-size: 12px
        }

        .visually-hidden {
            position: absolute !important;
            height: 1px;
            width: 1px;
            overflow: hidden;
            clip: rect(1px, 1px, 1px, 1px);
            white-space: nowrap;
            border: 0;
            padding: 0;
            margin: -1px
        }

        @media (max-width:480px) {
            .syllable-row {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>

<body>
    <header class="app-header">
        <h1 class="app-title">John’s Vietnamese Phrases</h1>
        <nav class="top-nav">
            <a href="#tone-guide" id="toneGuideLink" class="tone-link">Tone Guide</a>
        </nav>
    </header>

    <main id="app">
        <!-- View: Categories (DEFAULT) -->
        <section id="view-categories" class="view active" aria-label="Categories">
            <h2 class="visually-hidden">Categories</h2>
            <ul id="categoryList" class="category-list"></ul>
        </section>

        <!-- View: Phrases -->
        <section id="view-phrases" class="view" aria-label="Phrases" hidden>
            <div class="view-header">
                <button id="btnBackToCategories" class="btn back">Categories</button>
                <button id="btnOpenToneGuideFromPhrases" class="btn ghost">Tone Guide</button>
            </div>
            <h2 id="phrasesCategoryTitle" class="category-title"></h2>
            <div id="phrasesContainer" class="phrases-container"></div>
        </section>

        <!-- View: Tone Guide -->
        <section id="view-tone" class="view" aria-label="Tone Guide" hidden>
            <div class="view-header">
                <button id="btnBackFromTone" class="btn back">Categories</button>
            </div>
            <h2 class="category-title">Tone Guide</h2>
            <div class="tone-guide">
                <ul>
                    <li><strong>sắc</strong> — rising ↗</li>
                    <li><strong>huyền</strong> — falling ↘</li>
                    <li><strong>hỏi</strong> — dipping ˇ</li>
                    <li><strong>nặng</strong> — heavy/low (glottal stop)</li>
                    <li><strong>không</strong> — level (no mark)</li>
                </ul>
                <p class="note">Micro-audio/visuals can be added later without changing layout.</p>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <small>Phase 1 — MVP (Syllable model, categories-first). Record/Compare &amp; Check Tone are
            placeholders.</small>
    </footer>
    <script>
        // ===== Utilities: diacritics handling + slugging =====
        const VN_DIACRITIC_MAP = Object.freeze({
            'à': 'a', 'á': 'a', 'ả': 'a', 'ã': 'a', 'ạ': 'a', 'ă': 'a', 'ằ': 'a', 'ắ': 'a', 'ẳ': 'a', 'ẵ': 'a', 'ặ': 'a', 'â': 'a', 'ầ': 'a', 'ấ': 'a', 'ẩ': 'a', 'ẫ': 'a', 'ậ': 'a',
            'è': 'e', 'é': 'e', 'ẻ': 'e', 'ẽ': 'e', 'ẹ': 'e', 'ê': 'e', 'ề': 'e', 'ế': 'e', 'ể': 'e', 'ễ': 'e', 'ệ': 'e',
            'ì': 'i', 'í': 'i', 'ỉ': 'i', 'ĩ': 'i', 'ị': 'i',
            'ò': 'o', 'ó': 'o', 'ỏ': 'o', 'õ': 'o', 'ọ': 'o', 'ô': 'o', 'ồ': 'o', 'ố': 'o', 'ổ': 'o', 'ỗ': 'o', 'ộ': 'o', 'ơ': 'o', 'ờ': 'o', 'ớ': 'o', 'ở': 'o', 'ỡ': 'o', 'ợ': 'o',
            'ù': 'u', 'ú': 'u', 'ủ': 'u', 'ũ': 'u', 'ụ': 'u', 'ư': 'u', 'ừ': 'u', 'ứ': 'u', 'ử': 'u', 'ữ': 'u', 'ự': 'u',
            'ỳ': 'y', 'ý': 'y', 'ỷ': 'y', 'ỹ': 'y', 'ỵ': 'y',
            'đ': 'd',
            'À': 'a', 'Á': 'a', 'Ả': 'a', 'Ã': 'a', 'Ạ': 'a', 'Ă': 'a', 'Ằ': 'a', 'Ắ': 'a', 'Ẳ': 'a', 'Ẵ': 'a', 'Ặ': 'a', 'Â': 'a', 'Ầ': 'a', 'Ấ': 'a', 'Ẩ': 'a', 'Ẫ': 'a', 'Ậ': 'a',
            'È': 'e', 'É': 'e', 'Ẻ': 'e', 'Ẽ': 'e', 'Ẹ': 'e', 'Ê': 'e', 'Ề': 'e', 'Ế': 'e', 'Ể': 'e', 'Ễ': 'e', 'Ệ': 'e',
            'Ì': 'i', 'Í': 'i', 'Ỉ': 'i', 'Ĩ': 'i', 'Ị': 'i',
            'Ò': 'o', 'Ó': 'o', 'Ỏ': 'o', 'Õ': 'o', 'Ọ': 'o', 'Ô': 'o', 'Ồ': 'o', 'Ố': 'o', 'Ổ': 'o', 'Ỗ': 'o', 'Ộ': 'o', 'Ơ': 'o', 'Ờ': 'o', 'Ớ': 'o', 'Ở': 'o', 'Ỡ': 'o', 'Ợ': 'o',
            'Ù': 'u', 'Ú': 'u', 'Ủ': 'u', 'Ũ': 'u', 'Ụ': 'u', 'Ư': 'u', 'Ừ': 'u', 'Ứ': 'u', 'Ử': 'u', 'Ữ': 'u', 'Ự': 'u',
            'Ỳ': 'y', 'Ý': 'y', 'Ỷ': 'y', 'Ỹ': 'y', 'Ỵ': 'y',
            'Đ': 'd'
        });
        function stripDiacritics(s) { return (s || '').split('').map(ch => VN_DIACRITIC_MAP[ch] ?? ch).join(''); }
        function slugifyWords(s) {
            const noTrim = (s || '').toLowerCase().replace(/\s+/g, ' ').trim();
            const noDia = stripDiacritics(noTrim);
            return noDia.replace(/[^\w\s-]/g, '').replace(/\s+/g, '-');
        }
        function fileVariantsForPhrase(phraseText) {
            // Try multiple plausible variants
            const t = (phraseText || '').trim();
            const lo = t.toLowerCase();
            const loStrip = stripDiacritics(lo);
            const hy = lo.replace(/\s+/g, '-');
            const hyStrip = loStrip.replace(/\s+/g, '-');
            return [hy, hyStrip, lo.replace(/\s+/g, ' '), loStrip.replace(/\s+/g, ' ')];
        }
        function fileVariantsForSyllable(sylText) {
            const t = (sylText || '').trim();
            const lo = t.toLowerCase();
            const loStrip = stripDiacritics(lo);
            return [lo, loStrip];
        }

        async function playWithFallback(candidates) {
            // candidates = array of bare filenames, we prepend assets/audio/
            for (const base of candidates) {
                const url = base.startsWith('assets/') ? base : `assets/audio/${base.replace(/\s+/g, '-')}`;
                try {
                    const audio = new Audio(url.endsWith('.mp3') ? url : `${url}.mp3`);
                    await audio.play();
                    return true;
                } catch (e) {
                    // continue to next candidate
                }
            }
            console.warn('Audio not found for candidates:', candidates);
            return false;
        }
    </script>
    <script>
        // ===== Data from Build Plan v2 (southern) =====
        // Where an explicit filename is known, set phraseAudio/syllables[i].audio = "exact-name.mp3".
        // If omitted, the player will try robust fallbacks based on the text.
        const DATA = {
            categories: [
                { id: "essentials", name: "Essentials" },
                { id: "food-drink", name: "Food & Drink" },
                { id: "travel", name: "Travel" },
                { id: "social", name: "Social" },
                { id: "shopping-money", name: "Shopping & Money" },
            ],
            phrases: {
                "essentials": [
                    {
                        vi: "Xin chào", en: "Hello",
                        syllables: [{ text: "Xin", tone: "sắc" }, { text: "chào", tone: "huyền" }]
                    },
                    {
                        vi: "Tạm biệt", en: "Goodbye",
                        syllables: [{ text: "Tạm", tone: "nặng" }, { text: "biệt", tone: "sắc" }]
                    },
                    {
                        vi: "Khỏe không?", en: "How are you?",
                        syllables: [{ text: "Khỏe", tone: "hỏi" }, { text: "không", tone: "không" }]
                    },
                    {
                        vi: "Tôi khỏe", en: "I’m fine",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "khỏe", tone: "hỏi" }]
                    },
                    {
                        vi: "Cảm ơn", en: "Thank you",
                        syllables: [{ text: "Cảm", tone: "hỏi" }, { text: "ơn", tone: "không" }]
                    },
                    {
                        vi: "Tôi chỉ nói được một chút tiếng Việt", en: "I only speak a little Vietnamese",
                        syllables: [
                            { text: "Tôi", tone: "không" }, { text: "chỉ", tone: "hỏi" }, { text: "nói", tone: "sắc" }, { text: "được", tone: "nặng" },
                            { text: "một", tone: "nặng" }, { text: "chút", tone: "sắc" }, { text: "tiếng", tone: "sắc" }, { text: "Việt", tone: "nặng" }
                        ]
                    },
                    {
                        vi: "Không có gì", en: "You’re welcome / no problem",
                        syllables: [{ text: "Không", tone: "không" }, { text: "có", tone: "sắc" }, { text: "gì", tone: "không" }]
                    },
                    {
                        vi: "Rất vui được gặp bạn", en: "Nice to meet you",
                        syllables: [{ text: "Rất", tone: "sắc" }, { text: "vui", tone: "không" }, { text: "được", tone: "nặng" }, { text: "gặp", tone: "nặng" }, { text: "bạn", tone: "nặng" }]
                    },
                ],
                "food-drink": [
                    {
                        vi: "Cà phê sữa đá", en: "Iced coffee with milk",
                        syllables: [{ text: "Cà", tone: "huyền" }, { text: "phê", tone: "không" }, { text: "sữa", tone: "sắc" }, { text: "đá", tone: "sắc" }]
                    },
                    {
                        vi: "Cho tôi một ly bia", en: "Give me a beer",
                        syllables: [{ text: "Cho", tone: "không" }, { text: "tôi", tone: "không" }, { text: "một", tone: "nặng" }, { text: "ly", tone: "không" }, { text: "bia", tone: "không" }]
                    },
                    {
                        vi: "Nước lọc", en: "Water",
                        syllables: [{ text: "Nước", tone: "sắc" }, { text: "lọc", tone: "nặng" }]
                    },
                    {
                        vi: "Tô phở", en: "A bowl of phở",
                        syllables: [{ text: "Tô", tone: "không" }, { text: "phở", tone: "hỏi" }]
                    },
                    {
                        vi: "Ngon quá!", en: "So delicious!",
                        syllables: [{ text: "Ngon", tone: "không" }, { text: "quá", tone: "sắc" }]
                    },
                    {
                        vi: "Tính tiền, ơi!", en: "The bill, please",
                        syllables: [{ text: "Tính", tone: "sắc" }, { text: "tiền", tone: "huyền" }, { text: "ơi", tone: "không" }]
                    },
                ],
                "travel": [
                    {
                        vi: "Đi đâu vậy?", en: "Where are you going?",
                        syllables: [{ text: "Đi", tone: "không" }, { text: "đâu", tone: "không" }, { text: "vậy", tone: "nặng" }]
                    },
                    {
                        vi: "Bao nhiêu tiền?", en: "How much?",
                        syllables: [{ text: "Bao", tone: "không" }, { text: "nhiêu", tone: "sắc" }, { text: "tiền", tone: "không" }]
                    },
                    {
                        vi: "Quá mắc!", en: "Too expensive!",
                        syllables: [{ text: "Quá", tone: "sắc" }, { text: "mắc", tone: "sắc" }]
                    },
                    {
                        vi: "Cho tôi xuống đây", en: "Let me get off here",
                        syllables: [{ text: "Cho", tone: "không" }, { text: "tôi", tone: "không" }, { text: "xuống", tone: "sắc" }, { text: "đây", tone: "không" }]
                    },
                    {
                        vi: "Xe buýt ở đâu?", en: "Where is the bus?",
                        syllables: [{ text: "Xe", tone: "không" }, { text: "buýt", tone: "sắc" }, { text: "ở", tone: "hỏi" }, { text: "đâu", tone: "không" }]
                    },
                    {
                        vi: "Tôi muốn đi tới…", en: "I want to go to…",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "muốn", tone: "sắc" }, { text: "đi", tone: "không" }, { text: "tới", tone: "sắc" }]
                    },
                ],
                "social": [
                    {
                        vi: "Bạn tên gì?", en: "What’s your name?",
                        syllables: [{ text: "Bạn", tone: "nặng" }, { text: "tên", tone: "không" }, { text: "gì", tone: "huyền" }]
                    },
                    {
                        vi: "Tôi tên là John", en: "My name is John",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "tên", tone: "không" }, { text: "là", tone: "huyền" }, { text: "John", tone: "foreign" }]
                    },
                    {
                        vi: "Bạn bao nhiêu tuổi?", en: "How old are you?",
                        syllables: [{ text: "Bạn", tone: "nặng" }, { text: "bao", tone: "không" }, { text: "nhiêu", tone: "sắc" }, { text: "tuổi", tone: "hỏi" }]
                    },
                    {
                        vi: "Tôi không hiểu", en: "I don’t understand",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "không", tone: "không" }, { text: "hiểu", tone: "hỏi" }]
                    },
                    {
                        vi: "Không sao đâu", en: "It’s okay / no problem",
                        syllables: [{ text: "Không", tone: "không" }, { text: "sao", tone: "không" }, { text: "đâu", tone: "không" }]
                    },
                    {
                        vi: "Tôi nhớ bạn", en: "I miss you",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "nhớ", tone: "sắc" }, { text: "bạn", tone: "nặng" }]
                    },
                    {
                        vi: "Tôi thương bạn", en: "I love you",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "thương", tone: "không" }, { text: "bạn", tone: "nặng" }]
                    },
                ],
                "shopping-money": [
                    {
                        vi: "Bao nhiêu tiền?", en: "How much?",
                        syllables: [{ text: "Bao", tone: "không" }, { text: "nhiêu", tone: "sắc" }, { text: "tiền", tone: "không" }]
                    },
                    {
                        vi: "Giảm giá được không?", en: "Can you give a discount?",
                        syllables: [{ text: "Giảm", tone: "hỏi" }, { text: "giá", tone: "sắc" }, { text: "được", tone: "nặng" }, { text: "không", tone: "không" }]
                    },
                    {
                        vi: "Mắc quá!", en: "Too expensive!",
                        syllables: [{ text: "Mắc", tone: "sắc" }, { text: "quá", tone: "sắc" }]
                    },
                    {
                        vi: "Tôi muốn mua cái này", en: "I want to buy this",
                        syllables: [{ text: "Tôi", tone: "không" }, { text: "muốn", tone: "sắc" }, { text: "mua", tone: "không" }, { text: "cái", tone: "sắc" }, { text: "này", tone: "không" }]
                    },
                    {
                        vi: "Có size lớn hơn không?", en: "Do you have a bigger size?",
                        syllables: [{ text: "Có", tone: "sắc" }, { text: "size", tone: "loan" }, { text: "lớn", tone: "sắc" }, { text: "hơn", tone: "không" }, { text: "không", tone: "không" }]
                    },
                    {
                        vi: "Cho tôi xem cái khác", en: "Let me see another one",
                        syllables: [{ text: "Cho", tone: "không" }, { text: "tôi", tone: "không" }, { text: "xem", tone: "sắc" }, { text: "cái", tone: "sắc" }, { text: "khác", tone: "sắc" }]
                    },
                    {
                        vi: "Không mua đâu", en: "I won’t buy it",
                        syllables: [{ text: "Không", tone: "không" }, { text: "mua", tone: "không" }, { text: "đâu", tone: "không" }]
                    },
                ],
            }
        };

        // ===== DOM helpers =====
        const $ = sel => document.querySelector(sel);
        function showView(name) {
            const views = ["categories", "phrases", "tone"];
            views.forEach(v => {
                const el = document.getElementById(`view-${v}`);
                if (!el) return;
                const on = v === name;
                el.hidden = !on;
                el.classList.toggle('active', on);
            });
            if (name === "categories") { window.scrollTo({ top: 0, behavior: 'instant' }); }
        }

        // ===== Renderers =====
        function renderCategories() {
            const ul = $("#categoryList");
            ul.innerHTML = "";
            DATA.categories.forEach(cat => {
                const count = (DATA.phrases[cat.id] || []).length;
                const li = document.createElement('li');
                li.innerHTML = `<span class="category-name">${cat.name}</span>
                        <span class="category-count">${count} phrase${count === 1 ? "" : "s"}</span>`;
                li.addEventListener('click', () => openCategory(cat.id, cat.name));
                ul.appendChild(li);
            });
        }

        function audioCandidatesForPhrase(item) {
            // explicit filename wins; else try variants from text
            if (item.phraseAudio) { return [item.phraseAudio]; }
            return fileVariantsForPhrase(item.vi).map(b => `${b}.mp3`);
        }
        function audioCandidatesForSyllable(syl) {
            if (syl.audio) { return [syl.audio]; }
            return fileVariantsForSyllable(syl.text).map(b => `${b}.mp3`);
        }

        function openCategory(catId, catName) {
            $("#phrasesCategoryTitle").textContent = catName;
            const container = $("#phrasesContainer");
            container.innerHTML = "";
            const items = DATA.phrases[catId] || [];
            items.forEach(item => {
                const card = document.createElement('div');
                card.className = 'phrase-card';

                // Top row: phrase play + text
                const top = document.createElement('div');
                top.className = 'phrase-top';

                const btnPhrase = document.createElement('button');
                btnPhrase.className = 'audio-btn primary';
                btnPhrase.textContent = "▶︎";
                btnPhrase.addEventListener('click', async () => {
                    btnPhrase.disabled = true;
                    await playWithFallback(audioCandidatesForPhrase(item));
                    btnPhrase.disabled = false;
                });

                const phraseText = document.createElement('div');
                phraseText.innerHTML = `<strong>${item.vi}</strong>`;

                top.appendChild(btnPhrase);
                top.appendChild(phraseText);

                // Syllables row
                const row = document.createElement('div');
                row.className = 'syllable-row';
                (item.syllables || []).forEach(syl => {
                    const wrap = document.createElement('div');
                    wrap.className = 'syllable';
                    const btnSyl = document.createElement('button');
                    btnSyl.className = 'audio-btn';
                    btnSyl.textContent = "▶︎";
                    btnSyl.addEventListener('click', async () => {
                        btnSyl.disabled = true;
                        await playWithFallback(audioCandidatesForSyllable(syl));
                        btnSyl.disabled = false;
                    });

                    const sylText = document.createElement('div');
                    sylText.className = 'syllable-text';
                    sylText.textContent = syl.text;

                    const tone = document.createElement('div');
                    tone.className = 'tone-name';
                    tone.textContent = syl.tone;

                    wrap.appendChild(btnSyl);
                    wrap.appendChild(sylText);
                    wrap.appendChild(tone);
                    row.appendChild(wrap);
                });

                // Translation
                const tr = document.createElement('div');
                tr.className = 'translation';
                tr.textContent = item.en;

                // Controls: Record/Compare placeholders + Check Tone placeholder
                const controls = document.createElement('div');
                controls.className = 'controls';
                const btnRecord = document.createElement('button');
                btnRecord.className = 'btn';
                btnRecord.textContent = 'Record (placeholder)';
                btnRecord.title = 'Phase 1.5: temporary client-side recording';
                btnRecord.disabled = true;

                const btnMy = document.createElement('button');
                btnMy.className = 'btn';
                btnMy.textContent = 'Play My Recording';
                btnMy.title = 'Phase 1.5: toggle between app audio and user recording';
                btnMy.disabled = true;

                const btnCheck = document.createElement('button');
                btnCheck.className = 'btn';
                btnCheck.textContent = 'Check Tone';
                btnCheck.title = 'Placeholder for ToneChecker integration';
                btnCheck.disabled = true;

                controls.append(btnRecord, btnMy, btnCheck);

                // Assemble card
                card.appendChild(top);
                card.appendChild(row);
                card.appendChild(tr);
                card.appendChild(controls);

                container.appendChild(card);
            });

            showView('phrases');
        }
    </script>
    <script>
        // ===== Wiring: nav + init =====
        document.getElementById('toneGuideLink').addEventListener('click', (e) => { e.preventDefault(); showView('tone'); });
        document.getElementById('btnOpenToneGuideFromPhrases').addEventListener('click', () => showView('tone'));
        document.getElementById('btnBackToCategories').addEventListener('click', () => showView('categories'));
        document.getElementById('btnBackFromTone').addEventListener('click', () => showView('categories'));

        // Init
        renderCategories();
        showView('categories'); // categories-first per plan
    </script>
</body>

</html>